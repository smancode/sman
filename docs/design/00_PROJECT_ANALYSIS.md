## 项目分析模块和步骤说明

### 1,项目结构
ls 所有文件夹得到一个基本架构
看看 ~/projects/opencode  的 /init怎么实现的
看看 ~/projects/knowledge-graph-system 怎么搞出项目结构的
然后生成自己的方案

### 2,技术栈
读取gradle或者maven的配置文件，分析项目的技术栈，包括但不限于：
- 后端框架（如 Spring Boot）
- 数据库（如 MySQL、PostgreSQL）
- 缓存（如 Redis）
- 消息队列（如 Kafka、RabbitMQ）
- 前端技术（如 React、Vue.js）
- 认证与授权（如 OAuth2、JWT）
- 其他相关技术（如 Docker、Kubernetes）
支持bge召回+重排

### 3,线程池配置
分析项目中是否有自定义的线程池配置，只要列出信息并存入向量库
支持bge召回+重排

### 4,DDL扫描 
找出所有的DbEntity类
Queen表扫描
Mapper.java或者mapper.xml获取业务实体
支持bge召回+重排

### 5,入口扫描 
详见  xxx.md，支持bge召回+重排

### 6,外调接口扫描
详细 yyy.md，支持bge召回+重排

### 7,Enum扫描
结合业务实体扫描Enum建立关系，支持bge召回+重排

### 8,公共类扫描
识别公共类和方法的作用，支持bge召回+重排

### 9,xml类代码的扫描和理解
**重点**：解决反射问题
要理解这个xml是干啥的，并拆解成JAVA！是流程、还是算法实现，还是配置文件。记录这个核心作用，这里一般都是收敛了某些东西，当有类似业务需求时，直接用bge召回这个xml，就可以快速实现。

### 10,案例SOP
复合需求，详细描述实现流程
支持bge召回+重排

### 11,语义化
把类和方法向量化，支持bge召回+重排

### 12,代码走读！
从入口开始分析业务流程，得出一个基本的业务功能，这里除了得到这个接口的流程，还有一个关键点，要修正入口类及其作用说明
支持bge召回+重排



## 总装
我们做了项目分析的结果要存储到向量库里，方便查询，分析以下需求
1,在插件的设置里面，要增加一个按钮”项目分析“，点击后按照01-12的顺序开始自动分析
2,每分析一个步骤，都要生成该步骤的md结果文件，并存储到 ~/.smanunion/projectKey/data/md/01_xxx.md，02_yyy.md... 英文大写固定命名 
3,2里面的md，设计好格式，储存的是内容说明，比如expert_consult用户问”项目用了什么技术栈？“，在向量库里存储的是”项目技术栈说明“及其匹配id，通过bge召回+重排后得到的是匹配id，再通过这个id拿到具体的说明
4,既然是按钮”项目分析“触发了项目分析，那么这里要灵活则增加删减步骤，需要一个设计模式，并且这些是有顺序的！
5,h2还能用吗？这样有些内容我希望配置到h2里实时调整！比如案例SOP，比如步骤是否可用，比如reranker的阈值等等
6,所有的向量化结果也要存储到 ~/.smanunion/projectKey/data/vector ，这样插件启动就自动加载进来 
7,把03_线程池配置扫描.md 融合到05_入口扫描.md里面去，是帮助分析入口的 
8,把03_线程池配置扫描.md 改成 03_AST扫描.md 参考 knowledge-graph-system 项目的实现
9,AST全项目扫描很重，需要能够增量更新，每次更新是锁定单文件更新，参考 knowledge-graph-system 的实现
10,ast扫描结果也要存储到 ~/.smanunion/projectKey/data/ast ，这样插件启动就自动加载进来 
11，要保存项目的文件的md5，这样才能判断是否有变化来实现增量更新，md5存储到 ~/.smanunion/projectKey/data/md5/ 目录下，参考 knowledge-graph-system 项目的实现
12，md5更新了，要更新：ast,入口（如果是入口类），外调接口（如果有），Enum（如果有），公共类（如果有），xml类代码（如果有）
