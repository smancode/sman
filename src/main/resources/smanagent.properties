# SmanAgent 配置文件
# 支持环境变量占位符：${ENV_VAR_NAME}

# ==================== LLM API 配置 ====================
llm.api.key=${LLM_API_KEY}
# 使用 coding 专用端点（与 agent 项目保持一致）
llm.base.url=https://open.bigmodel.cn/api/coding/paas/v4
llm.model.name=GLM-4.7
llm.response.max.tokens=28192

# ==================== 重试配置 ====================
# 最大重试次数
llm.retry.max=3
# 重试基础延迟（毫秒）
# 429 错误需要更长的等待时间，建议至少 5 秒
llm.retry.base.delay=5000

# ==================== 超时配置（毫秒）===================
llm.timeout.connect=30000
llm.timeout.read=180000
llm.timeout.write=30000

# ==================== ReAct 循环配置 ====================
react.max.steps=25
react.enable.streaming=true

# ==================== 上下文压缩配置 ====================
compaction.max.tokens=100000
compaction.threshold=80000
compaction.enable.intelligent=true

# ==================== 模型参数配置 ====================
llm.temperature=0.0
llm.default.max.tokens=4096

# ==================== 向量数据库配置 ====================
# 向量数据库类型: JVECTOR, MEMORY, MILVUS, CHROMA, PGVECTOR
vector.db.type=JVECTOR
vector.db.dimension=1024
vector.db.l1.cache.size=100
vector.db.l1.access.threshold=10
vector.db.l2.access.threshold=3

# H2 数据库配置（L3 冷数据存储）
vector.db.h2.path=${user.home}/.smanunion/analysis.mv.db
vector.db.h2.connection.pool.size=10
vector.db.h2.connection.idle=2

# JVector 配置（L2 温数据索引）
vector.db.jvector.dimension=1024
vector.db.jvector.M=16
vector.db.jvector.efConstruction=100
vector.db.jvector.efSearch=50
vector.db.jvector.enablePersist=true

# ==================== BGE-M3 向量化配置 ====================
# BGE-M3 服务端点（需自行部署）
bge.endpoint=http://localhost:8000/v1/embeddings
bge.model.name=BAAI/bge-m3
bge.dimension=1024
bge.timeout.seconds=30
bge.batch.size=10

# ==================== BGE-Reranker 配置 ====================
# Reranker 服务端点（需自行部署）
reranker.enabled=true
reranker.base.url=http://localhost:8001/v1
reranker.model=BAAI/bge-reranker-v2-m3
reranker.api.key=
reranker.timeout.seconds=30
reranker.retry=2
reranker.max.rounds=3
reranker.top.k=15

